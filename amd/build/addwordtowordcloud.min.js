define("mod_wordcloud/addwordtowordcloud",["exports","core/ajax","core/notification","core/modal_factory","core/str"],(function(_exports,_ajax,_notification,_modal_factory,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification),_modal_factory=_interopRequireDefault(_modal_factory);var _default=(()=>{let aid,listview,timestamphtml,refreshtime;const addWord=()=>{const newWord=document.getElementById("mod-wordcloud-new-word"),wordBox=document.getElementById("mod-wordcloud-words-box"),wordCount=document.getElementById("mod-wordcloud-wcount"),viewMenu=document.getElementById("mod-wordcloud-view-menu"),word=newWord.value.trim();word&&_ajax.default.call([{methodname:"mod_wordcloud_add_word",args:{aid:aid,word:word,listview:listview},done:returnval=>{returnval.cloudhtml?(wordBox.innerHTML=returnval.cloudhtml,wordCount.textContent=returnval.sumcount,newWord.value="",viewMenu.disabled=!1):_modal_factory.default.create({type:_modal_factory.default.types.CANCEL,title:(0,_str.get_string)("warning","mod_wordcloud"),body:returnval.warnings[0].message}).then((modal=>modal.show()))},fail:_notification.default.exception}])};return{init:(refreshTime,aidParam,timestampHtmlParam,listviewParam)=>{refreshtime=refreshTime,aid=aidParam,timestamphtml=timestampHtmlParam,listview=listviewParam;const wordInput=document.getElementById("mod-wordcloud-new-word"),addButton=document.getElementById("mod-wordcloud-btn");wordInput.addEventListener("keypress",(e=>{13===e.keyCode&&addButton.click()})),addButton.addEventListener("click",addWord),(()=>{const wordBox=document.getElementById("mod-wordcloud-words-box"),wordCount=document.getElementById("mod-wordcloud-wcount");setInterval((()=>{_ajax.default.call([{methodname:"mod_wordcloud_get_words",args:{aid:aid,timestamphtml:timestamphtml,listview:listview},done:returnval=>{returnval.cloudhtml&&(wordBox.innerHTML=returnval.cloudhtml,wordCount.textContent=returnval.sumcount,timestamphtml=returnval.timestamphtml)},fail:_notification.default.exception}])}),1e3*refreshtime)})()}}})();return _exports.default=_default,_exports.default}));

//# sourceMappingURL=addwordtowordcloud.min.js.map